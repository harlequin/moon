"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6677],{11373:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var o=t(53997),s=t(62540),a=t(43023);const r={slug:"moon-v1.2",title:"moon v1.2 - Tag based task inheritance",authors:["milesj"],tags:["tags","tasks"],image:"./img/moon/v1.2.png"},i=void 0,l={image:t(26883).A,authorsImageUrls:[void 0]},c=[{value:"Task inheritance based on project tags",id:"task-inheritance-based-on-project-tags",level:2},{value:"Other changes",id:"other-changes",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"In this small release, we're improving our task inheritance and performance."}),"\n",(0,s.jsx)(n.h2,{id:"task-inheritance-based-on-project-tags",children:"Task inheritance based on project tags"}),"\n",(0,s.jsxs)(n.p,{children:["In v0.23 we introduced ",(0,s.jsx)(n.a,{href:"/blog/v0.23#improved-task-inheritance-model",children:"scoped task inheritance"})," by\nproject type/language, and in v1.0 we introduced ",(0,s.jsx)(n.a,{href:"/blog/moon-v1.0#project-tagging",children:"project tagging"}),",\nbut what if we combined both of these features? In this release, you can now define workspace-level\ntasks ",(0,s.jsx)(n.em,{children:"by tag"})," that'll be inherited by all projects with that tag."]}),"\n",(0,s.jsxs)(n.p,{children:["To demonstrate this, say you have a monorepo composed of multiple ",(0,s.jsx)(n.a,{href:"https://astro.build",children:"Astro"}),"\napplications, each duplicating the same Astro tasks. Instead of duplicating, define an ",(0,s.jsx)(n.code,{children:"astro"})," tag\nin each project's ",(0,s.jsx)(n.a,{href:"/docs/config/project#tags",children:(0,s.jsx)(n.code,{children:"moon.yml"})}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="<project>/moon.yml"',children:"language: 'typescript'\ntype: 'application'\ntags: ['astro']\n"})}),"\n",(0,s.jsxs)(n.p,{children:["And then create a new tasks configuration at ",(0,s.jsx)(n.code,{children:".moon/tasks/tag-astro.yml"})," with the following\ncontents:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title=".moon/tasks/tag-astro.yml"',children:"fileGroups:\n  astro:\n    - 'public/**/*'\n    - 'src/**/*'\n    - 'astro.config.*'\n    - 'tsconfig.json'\n\ntasks:\n  astro:\n    command: 'astro'\n    local: true\n\n  # Development server\n  dev:\n    command: 'astro dev'\n    local: true\n\n  # Production build\n  build:\n    command: 'astro build'\n    inputs: ['@group(astro)']\n    outputs: ['dist']\n\n  # Check .astro files\n  check:\n    command: 'astro check'\n    inputs: ['@group(astro)']\n    deps: ['typecheck']\n\n  # Preview production build locally\n  preview:\n    command: 'astro preview'\n    deps: ['build']\n    local: true\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Each of these Astro applications will now inherit all 5 tasks and the file group automatically! This\nhelps to greatly reduce maintenance overhead and help enforce consistency across projects. Jump to\nthe official ",(0,s.jsx)(n.a,{href:"/docs/concepts/task-inheritance",children:"task inheritance docs"})," for more information on tag\nbased inheritance."]}),"\n",(0,s.jsx)(n.h2,{id:"other-changes",children:"Other changes"}),"\n",(0,s.jsxs)(n.p,{children:["View the ",(0,s.jsx)(n.a,{href:"https://github.com/moonrepo/moon/releases/tag/v1.2.0",children:"official release"})," for a full list of\nchanges."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Upgraded to proto v0.6."}),"\n",(0,s.jsx)(n.li,{children:"Improvements to file system operations."}),"\n",(0,s.jsx)(n.li,{children:"Minor improvements to performance."}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},26883:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/v1.2-bfa019f686325c7aa62d923dce3d92d3.png"},43023:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var o=t(63696);const s={},a=o.createContext(s);function r(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(a.Provider,{value:n},e.children)}},53997:e=>{e.exports=JSON.parse('{"permalink":"/blog/moon-v1.2","editUrl":"https://github.com/moonrepo/moon/tree/master/website/blog/2023-04-17_moon-v1.2.mdx","source":"@site/blog/2023-04-17_moon-v1.2.mdx","title":"moon v1.2 - Tag based task inheritance","description":"In this small release, we\'re improving our task inheritance and performance.","date":"2023-04-17T00:00:00.000Z","tags":[{"inline":true,"label":"tags","permalink":"/blog/tags/tags"},{"inline":true,"label":"tasks","permalink":"/blog/tags/tasks"}],"readingTime":1.4,"hasTruncateMarker":true,"authors":[{"name":"Miles Johnson","title":"Founder, developer","url":"https://github.com/milesj","imageURL":"/img/authors/miles.jpg","key":"milesj","page":null}],"frontMatter":{"slug":"moon-v1.2","title":"moon v1.2 - Tag based task inheritance","authors":["milesj"],"tags":["tags","tasks"],"image":"./img/moon/v1.2.png"},"unlisted":false,"prevItem":{"title":"proto v0.7 - First step towards plugins","permalink":"/blog/proto-v0.7"},"nextItem":{"title":"proto v0.6 - Unused cleaning and improved global binaries","permalink":"/blog/proto-v0.6"}}')}}]);