"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[33272],{29008:e=>{e.exports=JSON.parse('{"permalink":"/blog/proto-v0.34","editUrl":"https://github.com/moonrepo/moon/tree/master/website/blog/2024-04-07_proto-v0.34.mdx","source":"@site/blog/2024-04-07_proto-v0.34.mdx","title":"proto v0.34 - New detection strategy, status command, and outdated improvements","description":"In this release, we\'ve focused on the developer experience for common workflows.","date":"2024-04-07T00:00:00.000Z","tags":[{"inline":true,"label":"detection","permalink":"/blog/tags/detection"},{"inline":true,"label":"status","permalink":"/blog/tags/status"},{"inline":true,"label":"outdated","permalink":"/blog/tags/outdated"}],"readingTime":2.61,"hasTruncateMarker":true,"authors":[{"name":"Miles Johnson","title":"Founder, developer","url":"https://github.com/milesj","imageURL":"/img/authors/miles.jpg","key":"milesj","page":null}],"frontMatter":{"slug":"proto-v0.34","title":"proto v0.34 - New detection strategy, status command, and outdated improvements","authors":["milesj"],"tags":["detection","status","outdated"]},"unlisted":false,"prevItem":{"title":"moon v1.24 - Task mutexes, auto-detect revisions, project dependents, and more!","permalink":"/blog/moon-v1.24"},"nextItem":{"title":"moon v1.23 - Codegen improvements, stack inheritance, internal tasks, and more","permalink":"/blog/moon-v1.23"}}')},43023:(e,o,t)=>{t.d(o,{R:()=>i,x:()=>l});var n=t(63696);const s={},r=n.createContext(s);function i(e){const o=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function l(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(r.Provider,{value:o},e.children)}},75222:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>a});var n=t(29008),s=t(62540),r=t(43023);const i={slug:"proto-v0.34",title:"proto v0.34 - New detection strategy, status command, and outdated improvements",authors:["milesj"],tags:["detection","status","outdated"]},l=void 0,d={authorsImageUrls:[void 0]},a=[{value:"New <code>only-prototools</code> detection strategy",id:"new-only-prototools-detection-strategy",level:2},{value:"New <code>proto status</code> command",id:"new-proto-status-command",level:2},{value:"Improved <code>proto outdated</code> experience",id:"improved-proto-outdated-experience",level:2},{value:"What about v0.32 and v0.33?",id:"what-about-v032-and-v033",level:2},{value:"Other changes",id:"other-changes",level:2}];function c(e){const o={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"In this release, we've focused on the developer experience for common workflows."}),"\n",(0,s.jsxs)(o.h2,{id:"new-only-prototools-detection-strategy",children:["New ",(0,s.jsx)(o.code,{children:"only-prototools"})," detection strategy"]}),"\n",(0,s.jsxs)(o.p,{children:["proto currently detects versions at runtime using\n",(0,s.jsx)(o.a,{href:"/docs/proto/config#detect-strategy",children:"1 of 2 strategies"}),", ",(0,s.jsx)(o.code,{children:"first-available"})," which checks\n",(0,s.jsx)(o.code,{children:".prototools"})," files and tool-specific files (like ",(0,s.jsx)(o.code,{children:"package.json"})," engines), whichever is first, or\n",(0,s.jsx)(o.code,{children:"prefer-prototools"})," which works like the previous strategy, but prefers ",(0,s.jsx)(o.code,{children:".prototools"})," (even in a\nparent directory)."]}),"\n",(0,s.jsxs)(o.p,{children:["In this release, we're adding a 3rd strategy called ",(0,s.jsx)(o.code,{children:"only-prototools"}),". This strategy will only check\n",(0,s.jsx)(o.code,{children:".prototools"})," files and will not check tool-specific files. This is useful if you want explicit\nversions, and to avoid unexpected versions from random configs/directories."]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-toml",metastring:'title=".prototools"',children:'[settings]\ndetect-strategy = "only-prototools"\n'})}),"\n",(0,s.jsxs)(o.blockquote,{children:["\n",(0,s.jsx)(o.p,{children:"For the v1 release, we plan to make this strategy the new default."}),"\n"]}),"\n",(0,s.jsxs)(o.h2,{id:"new-proto-status-command",children:["New ",(0,s.jsx)(o.code,{children:"proto status"})," command"]}),"\n",(0,s.jsxs)(o.p,{children:["Sometimes you simply want to know what tools are currently active for a target directory, what\nversions those tools are resolved to, and the configuration file in which they are defined. To\nsatisfy this requirement, we've added a new ",(0,s.jsx)(o.a,{href:"/docs/proto/commands/status",children:(0,s.jsx)(o.code,{children:"proto status"})})," command,\nwhich outputs something like the following:"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{children:"$ proto status\n\nTool  Configured  Resolved  Installed                   Config\ndeno  1.40.0      1.40.0    ~/.proto/tools/deno/1.40.0  ~/.prototools\nnode  20.8.0      20.8.0    ~/.proto/tools/node/20.8.0  ~/.prototools\nnpm   10.1.0      10.1.0    ~/.proto/tools/npm/10.1.0   ~/.prototools\n"})}),"\n",(0,s.jsxs)(o.p,{children:["By default this includes tools from all ",(0,s.jsx)(o.code,{children:".prototools"})," files up the hierarchy, excluding\n",(0,s.jsx)(o.code,{children:"~/.proto/.prototools"}),". To include global tools as well, pass ",(0,s.jsx)(o.code,{children:"--include-global"}),"."]}),"\n",(0,s.jsxs)(o.h2,{id:"improved-proto-outdated-experience",children:["Improved ",(0,s.jsx)(o.code,{children:"proto outdated"})," experience"]}),"\n",(0,s.jsxs)(o.p,{children:["The ",(0,s.jsx)(o.a,{href:"/docs/proto/commands/outdated",children:(0,s.jsx)(o.code,{children:"proto outdated"})}),' command has worked "alright" but its developer\nexperience wasn\'t the best. The terminal output was rudimentary, and writing updated versions to\n',(0,s.jsx)(o.code,{children:".prototools"})," would save to the current directory, instead of the directory they are configured in."]}),"\n",(0,s.jsx)(o.p,{children:"To improve the overall developer experience, we've made the following changes to this command:"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"Displays all tools and available updates as a table of data."}),"\n",(0,s.jsx)(o.li,{children:"Includes both newest (matching range) and latest versions available."}),"\n",(0,s.jsx)(o.li,{children:"Includes the config file that the tool + version was loaded from."}),"\n",(0,s.jsxs)(o.li,{children:["When ",(0,s.jsx)(o.code,{children:"--update"})," is passed, will now prompt to confirm the update."]}),"\n",(0,s.jsx)(o.li,{children:"When updating versions, versions are now written to their original config file, instead of local."}),"\n",(0,s.jsxs)(o.li,{children:["Updated the ",(0,s.jsx)(o.code,{children:"--latest"})," flag to use the latest version when updating, instead of newest."]}),"\n"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{children:"$ proto outdated\n\nTool  Current  Newest   Latest  Config\ndeno  1.40.0   1.42.4   1.42.4  ~/.prototools\nnode  20.8.0   20.12.2  21.7.3  ~/.prototools\nnpm   10.1.0   10.5.2   10.5.2  ~/.prototools\n"})}),"\n",(0,s.jsx)(o.h2,{id:"what-about-v032-and-v033",children:"What about v0.32 and v0.33?"}),"\n",(0,s.jsx)(o.p,{children:"You may have noticed that we don't have blog posts for either of these versions. The v0.32 release\nwas a relatively light release with no meaningful changes, so we opted to not write a blog post for\nit. As for v0.33, we ran into build issues while releasing it, so we decided to skip it and move on\nto v0.34."}),"\n",(0,s.jsx)(o.h2,{id:"other-changes",children:"Other changes"}),"\n",(0,s.jsxs)(o.p,{children:["View the ",(0,s.jsx)(o.a,{href:"https://github.com/moonrepo/proto/releases/tag/v0.34.0",children:"official release"})," for a full list\nof changes."]}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:["Added a ",(0,s.jsx)(o.code,{children:"dist-url"})," setting to some plugins, allowing the distribution download URL to be\ncustomized."]}),"\n",(0,s.jsxs)(o.li,{children:["Updated ",(0,s.jsx)(o.code,{children:"proto setup"})," (which is ran during proto installation) to modify the ",(0,s.jsx)(o.code,{children:"PATH"})," system\nenvironment variable on Windows. To disable this functionality, pass ",(0,s.jsx)(o.code,{children:"--no-modify-path"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);